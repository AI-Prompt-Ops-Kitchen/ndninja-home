[
  {
    "name": "dojo_job_tracker",
    "event_type": "dojo.*",
    "action": {
      "type": "log",
      "message": "[Dojo] {event_type} — job={payload.job_id} status={payload.status}"
    }
  },
  {
    "name": "dojo_failure_alert",
    "event_type": "dojo.job_failed",
    "cooldown_seconds": 60,
    "action": {
      "type": "emit",
      "event_type": "notification.pipeline_failure",
      "source": "rasengan",
      "payload_template": {
        "job_id": "{payload.job_id}",
        "error": "{payload.error}",
        "severity": "high"
      }
    }
  },
  {
    "name": "dojo_upload_success",
    "event_type": "dojo.video_uploaded",
    "action": {
      "type": "emit",
      "event_type": "notification.video_live",
      "source": "rasengan",
      "payload_template": {
        "job_id": "{payload.job_id}",
        "video_id": "{payload.video_id}",
        "title": "{payload.title}"
      }
    }
  },
  {
    "name": "dojo_job_completed",
    "event_type": "dojo.job_completed",
    "action": {
      "type": "log",
      "message": "Video ready for review — job={payload.job_id} title={payload.title}"
    }
  },
  {
    "name": "git_activity_tracker",
    "event_type": "git.*",
    "action": {
      "type": "log",
      "message": "[Git] {event_type} — branch={payload.branch} hash={payload.hash}"
    }
  },
  {
    "name": "deploy_tracker",
    "event_type": "deploy.*",
    "action": {
      "type": "log",
      "message": "[Deploy] {event_type} — service={payload.service} exit={payload.exit_code}"
    }
  },
  {
    "name": "deploy_failure_alert",
    "event_type": "deploy.failed",
    "cooldown_seconds": 60,
    "action": {
      "type": "emit",
      "event_type": "notification.deploy_failure",
      "source": "rasengan",
      "payload_template": {
        "service": "{payload.service}",
        "exit_code": "{payload.exit_code}",
        "duration_seconds": "{payload.duration_seconds}",
        "severity": "high"
      }
    }
  }
]
